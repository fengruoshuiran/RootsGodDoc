[{"createdAt":"2025-06-21T19:20:44.834Z","updatedAt":"2025-07-02T20:43:55.000Z","id":"YZDeSwr57JS32eTm","name":"My workflow","active":false,"isArchived":false,"nodes":[{"parameters":{"content":"### Readme\nLoad your data into a vector database with the ğŸ“š **Load Data** flow, and then use your data as chat context with the ğŸ• **Retriever** flow.\n\n**Quick start**\n1. Click on the `Execute Workflow` button to run the ğŸ“š **Load Data** flow.\n2. Click on `Open Chat` button to run the ğŸ• **Retriever** flow. Then ask a question about content from your document(s)\n\n\nFor more info, check our [docs on RAG in n8n](https://docs.n8n.io/advanced-ai/rag-in-n8n/)","height":300,"width":440,"color":4},"id":"1e044d42-a097-485c-9861-746746c6c24e","name":"Sticky Note","type":"n8n-nodes-base.stickyNote","position":[-1500,400],"typeVersion":1},{"parameters":{"url":"http://localhost:11434","options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-460,-20],"id":"b2c44184-c5bf-4af4-8ed4-284abf553d65","name":"HTTP Request"},{"parameters":{},"type":"n8n-nodes-base.manualTrigger","typeVersion":1,"position":[-900,320],"id":"ed994d5a-cb25-413e-b592-50650113281b","name":"When clicking â€˜Execute workflowâ€™"},{"parameters":{},"type":"n8n-nodes-base.limit","typeVersion":1,"position":[-860,540],"id":"bafe136c-886c-4fbb-9fd1-9c28a18c578a","name":"Limit"},{"parameters":{"operation":"text","options":{}},"type":"n8n-nodes-base.extractFromFile","typeVersion":1,"position":[-900,-260],"id":"e29d87c3-d362-4c98-9bce-08c65296aa07","name":"Extract from File"},{"parameters":{"aggregate":"aggregateAllItemData","options":{}},"type":"n8n-nodes-base.aggregate","typeVersion":1,"position":[-480,-260],"id":"8ba1d475-0b96-4244-af0f-1ddfddc4d2fa","name":"Aggregate"},{"parameters":{"fileSelector":"D:/Godot/RootsGodDoc/**/*.md","options":{}},"type":"n8n-nodes-base.readWriteFile","typeVersion":1,"position":[-580,320],"id":"d7d4dd10-2307-40cd-86db-43161e717f7c","name":"è·å–è…æ ¹ä¹‹é‡Œè®¾è®¡æ–‡æ¡£æ‰€æœ‰.mdæ ¼å¼æ–‡ä»¶"},{"parameters":{"operation":"write","fileName":"=E:/AI/test/{{ $itemIndex+$json.fileName }}.txt","options":{}},"type":"n8n-nodes-base.readWriteFile","typeVersion":1,"position":[-340,320],"id":"5812ab93-5e48-4381-b5b4-0ce767154896","name":"è½¬æ¢ä¸º.txtæ–‡ä»¶æ”¾å…¥ä¸´æ—¶æ–‡ä»¶å¤¹ï¼Œå› ä¸ºn8nåªè¯†åˆ«å®ƒ"},{"parameters":{"fileSelector":"E:/AI/test/*.txt","options":{}},"type":"n8n-nodes-base.readWriteFile","typeVersion":1,"position":[-640,540],"id":"8a4b9bca-083a-4a05-8be4-d72c54044344","name":"é‡æ–°è¯»å–txtæ ¼å¼è¿›ç¼“å­˜æµç¨‹"}],"connections":{"When clicking â€˜Execute workflowâ€™":{"main":[[{"node":"è·å–è…æ ¹ä¹‹é‡Œè®¾è®¡æ–‡æ¡£æ‰€æœ‰.mdæ ¼å¼æ–‡ä»¶","type":"main","index":0}]]},"Limit":{"main":[[{"node":"é‡æ–°è¯»å–txtæ ¼å¼è¿›ç¼“å­˜æµç¨‹","type":"main","index":0}]]},"Extract from File":{"main":[[{"node":"Aggregate","type":"main","index":0}]]},"Aggregate":{"main":[[]]},"è·å–è…æ ¹ä¹‹é‡Œè®¾è®¡æ–‡æ¡£æ‰€æœ‰.mdæ ¼å¼æ–‡ä»¶":{"main":[[{"node":"è½¬æ¢ä¸º.txtæ–‡ä»¶æ”¾å…¥ä¸´æ—¶æ–‡ä»¶å¤¹ï¼Œå› ä¸ºn8nåªè¯†åˆ«å®ƒ","type":"main","index":0}]]},"è½¬æ¢ä¸º.txtæ–‡ä»¶æ”¾å…¥ä¸´æ—¶æ–‡ä»¶å¤¹ï¼Œå› ä¸ºn8nåªè¯†åˆ«å®ƒ":{"main":[[{"node":"Limit","type":"main","index":0}]]},"é‡æ–°è¯»å–txtæ ¼å¼è¿›ç¼“å­˜æµç¨‹":{"main":[[{"node":"Extract from File","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"3a0f9231-b563-4c2a-87a8-aea92a529494","triggerCount":1,"tags":[]},{"createdAt":"2025-06-23T03:45:14.075Z","updatedAt":"2025-07-12T20:06:52.000Z","id":"8dLXd9fzJI8Ll1cb","name":"æ ‡å‡†æœ¬åœ°éƒ¨ç½²gemma3:12bæ— é™åˆ¶å¯¹è¯","active":true,"isArchived":false,"nodes":[{"parameters":{"public":true,"initialMessages":"è¿™æ˜¯ä¸è‹¥ç„¶æœ¬åœ°éƒ¨ç½²çš„gemma3:12bæ¨¡å‹çš„é€šå¸¸èŠå¤©ï¼Œæ³¨æ„ä¸Šä¸‹æ–‡é•¿åº¦ä¸º32kï¼Œå› æ­¤ä¸èƒ½å¤„ç†éå¸¸å¤æ‚çš„é—®é¢˜ã€‚\n","options":{}},"type":"@n8n/n8n-nodes-langchain.chatTrigger","typeVersion":1.1,"position":[0,0],"id":"a2d368b6-184a-44bf-bebf-c7d4e408ad34","name":"When chat message received","webhookId":"3392e37c-5448-4196-8871-7a949490f614"},{"parameters":{"options":{}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":2,"position":[300,0],"id":"fe8f12ac-4488-4331-bc66-573629d307c9","name":"AI Agent"},{"parameters":{"model":"orieg/gemma3-tools:12b-it-qat","options":{"numCtx":32000}},"type":"@n8n/n8n-nodes-langchain.lmChatOllama","typeVersion":1,"position":[300,240],"id":"7e1b8021-e8ac-4e65-b267-9399e9573031","name":"Ollama Chat Model","credentials":{"ollamaApi":{"id":"WKWM5nX6hbkv8Cs5","name":"Ollama account"}}},{"parameters":{"contextWindowLength":100000},"type":"@n8n/n8n-nodes-langchain.memoryBufferWindow","typeVersion":1.3,"position":[420,240],"id":"b5493d1b-b56e-453c-8a14-1334f2393e90","name":"Simple Memory"}],"connections":{"When chat message received":{"main":[[{"node":"AI Agent","type":"main","index":0}]]},"Ollama Chat Model":{"ai_languageModel":[[{"node":"AI Agent","type":"ai_languageModel","index":0}]]},"Simple Memory":{"ai_memory":[[{"node":"AI Agent","type":"ai_memory","index":0}]]},"AI Agent":{"main":[[]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"3bb2e5e9-32a3-4b3a-a1f2-7c7fcc897afd","triggerCount":1,"tags":[]},{"createdAt":"2025-06-23T10:43:19.393Z","updatedAt":"2025-07-10T06:01:50.000Z","id":"GA3kJKgkPQZlzovy","name":"è‡ªåŠ¨æ ¹æ®åè¯è§£é‡Šæ›´æ–°å…³é”®å­—åˆ—è¡¨","active":true,"isArchived":false,"nodes":[{"parameters":{"triggerOn":"file","path":"D:/Godot/RootsGodDoc/src/åè¯è§£é‡Š.md","options":{}},"type":"n8n-nodes-base.localFileTrigger","typeVersion":1,"position":[-1000,20],"id":"910a3da3-50d9-4381-81e1-a07fce8749d3","name":"Local File Trigger"},{"parameters":{"promptType":"define","text":"={{ $json.data }}","options":{"systemMessage":"={{ $('keyword_summary_generator').item.json.data }}"}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":2,"position":[160,20],"id":"54d30f23-c7da-4759-a0dc-b7c5fd8a90f8","name":"AI Agent"},{"parameters":{"model":"orieg/gemma3-tools:12b-it-qat","options":{"numCtx":32000}},"type":"@n8n/n8n-nodes-langchain.lmChatOllama","typeVersion":1,"position":[160,240],"id":"42566a76-6deb-4158-96e4-0fd3cf93e986","name":"Ollama Chat Model","credentials":{"ollamaApi":{"id":"WKWM5nX6hbkv8Cs5","name":"Ollama account"}}},{"parameters":{"fileSelector":"D:/Godot/RootsGodDoc/src/åè¯è§£é‡Š.md","options":{}},"type":"n8n-nodes-base.readWriteFile","typeVersion":1,"position":[-320,20],"id":"979a68f8-7ea0-4ec8-8569-dc6b33553c6f","name":"Read/Write Files from Disk"},{"parameters":{"operation":"text","options":{}},"type":"n8n-nodes-base.extractFromFile","typeVersion":1,"position":[-80,20],"id":"3fa9a622-c0b8-483b-a4eb-dc39dc884e73","name":"Extract from File"},{"parameters":{"fileSelector":"D:/Godot/RootsGodDoc/prompt/keyword_summary_generator.md","options":{}},"type":"n8n-nodes-base.readWriteFile","typeVersion":1,"position":[-780,20],"id":"2f77455b-6f87-41a5-8dd3-1998f270fee8","name":"Read/Write Files from Disk1"},{"parameters":{"operation":"toText","sourceProperty":"output","options":{}},"type":"n8n-nodes-base.convertToFile","typeVersion":1.1,"position":[560,20],"id":"a9a2c6ed-606a-4d6a-8eb3-1679d05c34d8","name":"Convert to File"},{"parameters":{"operation":"write","fileName":"D:/Godot/RootsGodDoc/prompt/keyword_summary.md","options":{}},"type":"n8n-nodes-base.readWriteFile","typeVersion":1,"position":[800,20],"id":"88ab9445-c595-42f2-84d2-eff6d1de753b","name":"Read/Write Files from Disk2"},{"parameters":{"operation":"text","options":{}},"type":"n8n-nodes-base.extractFromFile","typeVersion":1,"position":[-560,20],"id":"36c41f1e-8dec-49a5-9b9d-8fa2194d60b8","name":"keyword_summary_generator"}],"connections":{"Ollama Chat Model":{"ai_languageModel":[[{"node":"AI Agent","type":"ai_languageModel","index":0}]]},"Local File Trigger":{"main":[[{"node":"Read/Write Files from Disk1","type":"main","index":0}]]},"Read/Write Files from Disk":{"main":[[{"node":"Extract from File","type":"main","index":0}]]},"Extract from File":{"main":[[{"node":"AI Agent","type":"main","index":0}]]},"Read/Write Files from Disk1":{"main":[[{"node":"keyword_summary_generator","type":"main","index":0}]]},"AI Agent":{"main":[[{"node":"Convert to File","type":"main","index":0}]]},"Convert to File":{"main":[[{"node":"Read/Write Files from Disk2","type":"main","index":0}]]},"keyword_summary_generator":{"main":[[{"node":"Read/Write Files from Disk","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"d6e71d50-bbd6-43c1-8ed8-0228c1d63e84","triggerCount":1,"tags":[]},{"createdAt":"2025-06-23T11:51:23.252Z","updatedAt":"2025-07-12T20:16:41.000Z","id":"lifwWDqA9UzDu7Vh","name":"å°†å¡ç‰Œè®¾è®¡è‰ç¨¿æ ¼å¼åŒ–ä¸ºæ–‡æ¡£","active":true,"isArchived":false,"nodes":[{"parameters":{"model":"orieg/gemma3-tools:12b-it-qat","options":{"numCtx":32000}},"type":"@n8n/n8n-nodes-langchain.lmChatOllama","typeVersion":1,"position":[880,860],"id":"5186c109-0520-4507-89a5-6365a847d7c0","name":"Ollama Chat Model","credentials":{"ollamaApi":{"id":"WKWM5nX6hbkv8Cs5","name":"Ollama account"}}},{"parameters":{"fileSelector":"D:/Godot/RootsGodDoc/prompt/card_schema.md","options":{}},"type":"n8n-nodes-base.readWriteFile","typeVersion":1,"position":[-960,600],"id":"7cbc7b80-5613-4f2b-945f-31f81a34ddb3","name":"Read/Write Files from Disk"},{"parameters":{"fileSelector":"D:/Godot/RootsGodDoc/prompt/version.md","options":{}},"type":"n8n-nodes-base.readWriteFile","typeVersion":1,"position":[-940,140],"id":"5185085b-7cc3-4f10-aba0-f48fcb5ace43","name":"Read/Write Files from Disk1"},{"parameters":{"fileSelector":"D:/Godot/RootsGodDoc/prompt/keyword_summary.md","options":{}},"type":"n8n-nodes-base.readWriteFile","typeVersion":1,"position":[-960,380],"id":"109b8963-7f6e-417f-8ec3-37e7e6ffa2d7","name":"Read/Write Files from Disk2"},{"parameters":{"operation":"text","destinationKey":"version","options":{}},"type":"n8n-nodes-base.extractFromFile","typeVersion":1,"position":[-700,140],"id":"b2c1cbaa-6c67-4a80-9493-4adb826d6704","name":"version"},{"parameters":{"operation":"text","destinationKey":"keyword_summary","options":{}},"type":"n8n-nodes-base.extractFromFile","typeVersion":1,"position":[-700,380],"id":"d4f9e014-cb05-4e12-8b69-d20554aff647","name":"keyword_summary"},{"parameters":{"operation":"text","destinationKey":"card_schema","options":{}},"type":"n8n-nodes-base.extractFromFile","typeVersion":1,"position":[-700,600],"id":"283a7568-dda9-44cd-8ea8-b429859561e7","name":"card_schema"},{"parameters":{"promptType":"define","text":"={{ $json.data[0].chatInput }}","options":{"systemMessage":"={{ $json.data[3].card_schema }}\n\n------\n\n{{ $json.data[2].keyword_summary }}\n\n------\n\n{{ $json.data[1].version }}\n\nåœ¨è¾“å‡ºæ—¶ä½ å¿…é¡»æ­£ç¡®çš„ä½¿ç”¨ç»™å‡ºçš„ç‰ˆæœ¬å·ï¼Œè€Œä¸æ˜¯è‡ªè¡Œæœæ’°\n\n------\n\nè¿™æ˜¯ä¸€äº›å¡ç‰Œæ–‡æ¡£ç¤ºä¾‹ï¼š\n\n{{ $json.data[4].cards }}"}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":2,"position":[660,500],"id":"99bde0ad-5aee-41d9-9939-17ba2ca5a2bb","name":"æ€»ç»“ä¸ºæ ‡å‡†æ–‡æ¡£"},{"parameters":{"options":{}},"type":"@n8n/n8n-nodes-langchain.chatTrigger","typeVersion":1.1,"position":[-1280,380],"id":"a6b5e5e1-1502-4ca8-baa7-faccee8ecb1b","name":"When chat message received","webhookId":"749093bc-296d-4e4f-ba0f-1eba5c082333"},{"parameters":{"promptType":"define","text":"={{ $('æ€»ç»“ä¸ºæ ‡å‡†æ–‡æ¡£').item.json.output }}","options":{"systemMessage":"ä½ æ˜¯ä¸€ä¸ªé‡è¦ä¸”èªæ˜çš„AIåŠ©æ‰‹ï¼Œä¸ºä¸€ä¸ªä¸¥å¯†è€Œå¯Œæœ‰åˆ›ä½œåŠ›çš„æ¸¸æˆè®¾è®¡å›¢é˜Ÿå·¥ä½œã€‚\n\nä½œä¸ºè®¾è®¡å¸ˆçš„å½’æ¡£ç§˜ä¹¦ï¼Œä½ æ”¶åˆ°çš„èµ„æ–™ä¸€å®šæ˜¯æ ¼å¼ä¸¥è°¨ã€è§„èŒƒçš„markdownä¹¦å†™çš„å¡ç‰Œè®¾è®¡æ–‡æ¡£ï¼Œä½ éœ€è¦å°†å®ƒçš„ä¸€çº§æ ‡é¢˜æç‚¼å‡ºæ¥å¹¶ç›´æ¥è¾“å‡ºä¸ºxxx.mdçš„å½¢å¼ï¼Œä¾‹å¦‚ï¼šé‡‘è‹¹æœ.md\n\nä½ çš„å›å¤å°†ç«‹åˆ»ç”¨äºåç»­è‡ªåŠ¨åŒ–æ­¥éª¤ï¼Œå› æ­¤ç»å¯¹ç¦æ­¢åŒ…å«è¦æ±‚ä»¥å¤–çš„ä»»ä½•æ•¬è¯­æˆ–å›åº”ã€‚"}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":2,"position":[1040,600],"id":"2873ee86-9928-4aba-85e3-94e03886e085","name":"æç‚¼æ ‡é¢˜"},{"parameters":{"operation":"toText","sourceProperty":"output","binaryPropertyName":"=data","options":{}},"type":"n8n-nodes-base.convertToFile","typeVersion":1.1,"position":[1060,360],"id":"abcbdf05-bf8d-4de2-b345-bd6ab553ec20","name":"Convert to File"},{"parameters":{"operation":"write","fileName":"=D:/Godot/RootsGodDoc/src/å¡ç‰Œ/{{ $json.output.trim() }}","options":{}},"type":"n8n-nodes-base.readWriteFile","typeVersion":1,"position":[1640,500],"id":"9ada5b01-f34f-471a-a779-a2f6c8dcbdde","name":"Read/Write Files from Disk3"},{"parameters":{"mode":"combine","combineBy":"combineByPosition","options":{}},"type":"n8n-nodes-base.merge","typeVersion":3.2,"position":[1380,500],"id":"0c18a685-c157-47bd-a1a7-983f8840b1b8","name":"Merge"},{"parameters":{"operation":"text","destinationKey":"cards","options":{}},"type":"n8n-nodes-base.extractFromFile","typeVersion":1,"position":[-740,820],"id":"9021ee49-c601-425c-a880-67f7d7d9bd01","name":"Extract from File"},{"parameters":{"fileSelector":"D:/Godot/RootsGodDoc/src/å¡ç‰Œ/*.md","options":{}},"type":"n8n-nodes-base.readWriteFile","typeVersion":1,"position":[-960,820],"id":"bb409dbd-84dc-4ee3-b625-4619706e7dcd","name":"è·å–è…æ ¹ä¹‹é‡Œè®¾è®¡æ–‡æ¡£æ‰€æœ‰.mdæ ¼å¼æ–‡ä»¶"},{"parameters":{"fieldsToAggregate":{"fieldToAggregate":[{"fieldToAggregate":"cards"}]},"options":{}},"type":"n8n-nodes-base.aggregate","typeVersion":1,"position":[-280,820],"id":"94ed8f4f-2f84-4f20-b05c-5a573213d42f","name":"Aggregate"},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"51ec1202-bbae-429b-a7c6-7928b24c12e1","leftValue":"={{ Math.random() }}","rightValue":0.1,"operator":{"type":"number","operation":"lte"}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.filter","typeVersion":2.2,"position":[-520,820],"id":"f36727f0-b517-4dbc-b906-69517e023593","name":"Filter"},{"parameters":{"numberInputs":5},"type":"n8n-nodes-base.merge","typeVersion":3.2,"position":[20,480],"id":"4ffa5ad3-ec20-4ad6-87c1-c4e3144e5451","name":"Merge1"},{"parameters":{"aggregate":"aggregateAllItemData","options":{}},"type":"n8n-nodes-base.aggregate","typeVersion":1,"position":[260,500],"id":"01573d74-d1c6-47a3-9be6-c2f9ac711fae","name":"Aggregate1"},{"parameters":{},"type":"n8n-nodes-base.noOp","typeVersion":1,"position":[-940,-20],"id":"95e1eda4-fcc9-4f5e-b604-1c9ea5819855","name":"No Operation, do nothing"},{"parameters":{},"type":"n8n-nodes-base.noOp","typeVersion":1,"position":[-240,-20],"id":"c29132cb-554c-4631-9df0-3f9ef1cdd095","name":"No Operation, do nothing1"}],"connections":{"Ollama Chat Model":{"ai_languageModel":[[{"node":"æ€»ç»“ä¸ºæ ‡å‡†æ–‡æ¡£","type":"ai_languageModel","index":0},{"node":"æç‚¼æ ‡é¢˜","type":"ai_languageModel","index":0}]]},"Read/Write Files from Disk":{"main":[[{"node":"card_schema","type":"main","index":0}]]},"Read/Write Files from Disk1":{"main":[[{"node":"version","type":"main","index":0}]]},"version":{"main":[[{"node":"Merge1","type":"main","index":1}]]},"Read/Write Files from Disk2":{"main":[[{"node":"keyword_summary","type":"main","index":0}]]},"keyword_summary":{"main":[[{"node":"Merge1","type":"main","index":2}]]},"card_schema":{"main":[[{"node":"Merge1","type":"main","index":3}]]},"æ€»ç»“ä¸ºæ ‡å‡†æ–‡æ¡£":{"main":[[{"node":"Convert to File","type":"main","index":0},{"node":"æç‚¼æ ‡é¢˜","type":"main","index":0}]]},"When chat message received":{"main":[[{"node":"Read/Write Files from Disk1","type":"main","index":0},{"node":"Read/Write Files from Disk2","type":"main","index":0},{"node":"Read/Write Files from Disk","type":"main","index":0},{"node":"è·å–è…æ ¹ä¹‹é‡Œè®¾è®¡æ–‡æ¡£æ‰€æœ‰.mdæ ¼å¼æ–‡ä»¶","type":"main","index":0},{"node":"No Operation, do nothing","type":"main","index":0}]]},"æç‚¼æ ‡é¢˜":{"main":[[{"node":"Merge","type":"main","index":1}]]},"Convert to File":{"main":[[{"node":"Merge","type":"main","index":0}]]},"Merge":{"main":[[{"node":"Read/Write Files from Disk3","type":"main","index":0}]]},"Extract from File":{"main":[[{"node":"Filter","type":"main","index":0}]]},"è·å–è…æ ¹ä¹‹é‡Œè®¾è®¡æ–‡æ¡£æ‰€æœ‰.mdæ ¼å¼æ–‡ä»¶":{"main":[[{"node":"Extract from File","type":"main","index":0}]]},"Filter":{"main":[[{"node":"Aggregate","type":"main","index":0}]]},"Aggregate":{"main":[[{"node":"Merge1","type":"main","index":4}]]},"Merge1":{"main":[[{"node":"Aggregate1","type":"main","index":0}]]},"Aggregate1":{"main":[[{"node":"æ€»ç»“ä¸ºæ ‡å‡†æ–‡æ¡£","type":"main","index":0}]]},"No Operation, do nothing":{"main":[[{"node":"No Operation, do nothing1","type":"main","index":0}]]},"No Operation, do nothing1":{"main":[[{"node":"Merge1","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"a3ebd928-9f39-46a2-8dae-5cfea0f0671c","triggerCount":1,"tags":[]},{"createdAt":"2025-07-02T17:37:48.943Z","updatedAt":"2025-07-02T17:57:42.000Z","id":"1NgdxF3IrWAuL01L","name":"åŒæ­¥n8nåˆ°å·¥ç¨‹ä½¿å¾—å…¶å¯ç‰ˆæœ¬ç®¡ç†","active":false,"isArchived":false,"nodes":[{"parameters":{},"type":"n8n-nodes-base.manualTrigger","typeVersion":1,"position":[0,0],"id":"0a8b5a06-d50b-4aff-a262-bf6d128342c6","name":"When clicking â€˜Execute workflowâ€™"},{"parameters":{"command":"npx n8n export:workflow --all --output=D:/Godot/RootsGodDoc/n8n/file.json"},"type":"n8n-nodes-base.executeCommand","typeVersion":1,"position":[220,0],"id":"1e38d17c-21b2-4790-bc27-22f280209a63","name":"Execute Command"}],"connections":{"When clicking â€˜Execute workflowâ€™":{"main":[[{"node":"Execute Command","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"9e1c66d3-a4f9-43de-8111-5a404b2f5580","triggerCount":0,"tags":[]},{"createdAt":"2025-07-04T05:35:32.851Z","updatedAt":"2025-07-12T22:33:16.000Z","id":"H9AeIU1pRN05CQrr","name":"è‡ªåŠ¨æ€»ç»“CHANGELOG","active":false,"isArchived":false,"nodes":[{"parameters":{"triggerOn":"folder","path":"D:/Godot/RootsGodDoc/src/å¡ç‰Œ","events":["add","change"],"options":{"awaitWriteFinish":true}},"type":"n8n-nodes-base.localFileTrigger","typeVersion":1,"position":[0,0],"id":"5535a9dc-ee4d-442f-adea-64fc8880c387","name":"Local File Trigger"},{"parameters":{"triggerOn":"folder","path":"D:/Godot/RootsGodDoc/src/å¡ç‰Œç»„","events":["add","change"],"options":{"awaitWriteFinish":true}},"type":"n8n-nodes-base.localFileTrigger","typeVersion":1,"position":[0,-180],"id":"d09a4d8a-77a6-422a-b6f0-df451e832d42","name":"Local File Trigger1"},{"parameters":{},"type":"n8n-nodes-base.noOp","typeVersion":1,"position":[280,-80],"id":"2edaf4fd-88b2-4eeb-8f76-8a5b96e8959f","name":"No Operation, do nothing"},{"parameters":{"fileSelector":"D:/Godot/RootsGodDoc/prompt/changelog_unreleased.md","options":{}},"type":"n8n-nodes-base.readWriteFile","typeVersion":1,"position":[540,-80],"id":"c2d182d1-0d64-495b-a005-ae414aa54b58","name":"Read/Write Files from Disk"},{"parameters":{"fileSelector":"D:/Godot/RootsGodDoc/prompt/version.md","options":{}},"type":"n8n-nodes-base.readWriteFile","typeVersion":1,"position":[540,-280],"id":"317c12bc-fb68-435f-b12f-782ec4567329","name":"Read/Write Files from Disk1"},{"parameters":{"operation":"text","destinationKey":"version","options":{}},"type":"n8n-nodes-base.extractFromFile","typeVersion":1,"position":[760,-280],"id":"83d8abf7-5041-4c88-84ac-7a3cc649d585","name":"version"},{"parameters":{"numberInputs":5},"type":"n8n-nodes-base.merge","typeVersion":3.2,"position":[1040,-100],"id":"f3c19c24-d7d6-4506-a070-71cd8bcc9b52","name":"Merge"},{"parameters":{"fileSelector":"D:/Godot/RootsGodDoc/prompt/changelog_schema.md","options":{}},"type":"n8n-nodes-base.readWriteFile","typeVersion":1,"position":[540,-500],"id":"b8af7311-b886-4a01-a4d7-e72cba8c3626","name":"Read/Write Files from Disk2"},{"parameters":{"operation":"text","destinationKey":"schema","options":{}},"type":"n8n-nodes-base.extractFromFile","typeVersion":1,"position":[760,-500],"id":"9d1e4ab5-7f2d-4297-9be5-5161a0fc037f","name":"schema"},{"parameters":{"operation":"text","destinationKey":"changelog","options":{}},"type":"n8n-nodes-base.extractFromFile","typeVersion":1,"position":[760,-80],"id":"0fe11531-d678-48eb-8723-6545df397352","name":"changelog"},{"parameters":{"operation":"text","destinationKey":"change_file","options":{}},"type":"n8n-nodes-base.extractFromFile","typeVersion":1,"position":[760,140],"id":"b22c5c55-f711-490c-bea7-62e247e9409a","name":"change_file"},{"parameters":{"fileSelector":"={{ $json.path.replace(/\\\\/g, '/') }}","options":{}},"type":"n8n-nodes-base.readWriteFile","typeVersion":1,"position":[540,140],"id":"e6eb3fd9-57c1-466f-8e68-46b0f66c1b5a","name":"Read/Write Files from Disk3"},{"parameters":{"aggregate":"aggregateAllItemData","options":{}},"type":"n8n-nodes-base.aggregate","typeVersion":1,"position":[1260,-80],"id":"206101aa-52b9-4729-90ec-df48eb18bc54","name":"Aggregate"},{"parameters":{"assignments":{"assignments":[{"id":"35db9c10-28a3-43d4-8e20-ffad61be22ad","name":"data","value":"={{ $json.data[0].schema }}\n\n------\n\n{{ $json.data[1].version }}\n\n------\n\n{{ $json.data[2].changelog }}\n\n------\n\n{{ $json.data[3].change_file }}","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[1480,-80],"id":"7e197ddb-66ad-45db-98d7-3b9f4241033f","name":"Edit Fields"},{"parameters":{"promptType":"define","text":"={{ $json.data }}","options":{}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":2,"position":[1740,-80],"id":"ad858d62-16ee-4dfe-831b-2a2c00846171","name":"AI Agent"},{"parameters":{"model":"orieg/gemma3-tools:12b-it-qat","options":{"numCtx":32000}},"type":"@n8n/n8n-nodes-langchain.lmChatOllama","typeVersion":1,"position":[1740,140],"id":"8b831bff-0e29-4fdb-9e1a-99c925536eff","name":"Ollama Chat Model","credentials":{"ollamaApi":{"id":"WKWM5nX6hbkv8Cs5","name":"Ollama account"}}},{"parameters":{"operation":"write","fileName":"D:/Godot/RootsGodDoc/prompt/changelog_unreleased.md","options":{}},"type":"n8n-nodes-base.readWriteFile","typeVersion":1,"position":[2400,-80],"id":"6cd26eb7-2ba0-4423-b4cc-956cbccb206a","name":"Read/Write Files from Disk4"},{"parameters":{"operation":"toText","sourceProperty":"output","options":{}},"type":"n8n-nodes-base.convertToFile","typeVersion":1.1,"position":[2140,-80],"id":"74537671-7a2a-4087-8ad5-ee9309dc368c","name":"Convert to File"},{"parameters":{"fileSelector":"=D:/Godot/RootsGodDoc/src/SUMMARY.md","options":{}},"type":"n8n-nodes-base.readWriteFile","typeVersion":1,"position":[540,360],"id":"10b70d71-863b-45b7-9ce1-9b7fb0007224","name":"Read/Write Files from Disk5"},{"parameters":{"operation":"text","destinationKey":"summary","options":{}},"type":"n8n-nodes-base.extractFromFile","typeVersion":1,"position":[760,360],"id":"86cdc601-9f09-46f9-b08e-4592961e2b75","name":"summary"}],"connections":{"Local File Trigger":{"main":[[{"node":"No Operation, do nothing","type":"main","index":0}]]},"Local File Trigger1":{"main":[[{"node":"No Operation, do nothing","type":"main","index":0}]]},"No Operation, do nothing":{"main":[[{"node":"Read/Write Files from Disk","type":"main","index":0},{"node":"Read/Write Files from Disk1","type":"main","index":0},{"node":"Read/Write Files from Disk2","type":"main","index":0},{"node":"Read/Write Files from Disk3","type":"main","index":0},{"node":"Read/Write Files from Disk5","type":"main","index":0}]]},"Read/Write Files from Disk":{"main":[[{"node":"changelog","type":"main","index":0}]]},"Read/Write Files from Disk1":{"main":[[{"node":"version","type":"main","index":0}]]},"version":{"main":[[{"node":"Merge","type":"main","index":1}]]},"Read/Write Files from Disk2":{"main":[[{"node":"schema","type":"main","index":0}]]},"changelog":{"main":[[{"node":"Merge","type":"main","index":2}]]},"schema":{"main":[[{"node":"Merge","type":"main","index":0}]]},"change_file":{"main":[[{"node":"Merge","type":"main","index":3}]]},"Read/Write Files from Disk3":{"main":[[{"node":"change_file","type":"main","index":0}]]},"Merge":{"main":[[{"node":"Aggregate","type":"main","index":0}]]},"Aggregate":{"main":[[{"node":"Edit Fields","type":"main","index":0}]]},"Edit Fields":{"main":[[{"node":"AI Agent","type":"main","index":0}]]},"Ollama Chat Model":{"ai_languageModel":[[{"node":"AI Agent","type":"ai_languageModel","index":0}]]},"Read/Write Files from Disk4":{"main":[[]]},"AI Agent":{"main":[[{"node":"Convert to File","type":"main","index":0}]]},"Convert to File":{"main":[[{"node":"Read/Write Files from Disk4","type":"main","index":0}]]},"Read/Write Files from Disk5":{"main":[[{"node":"summary","type":"main","index":0}]]},"summary":{"main":[[{"node":"Merge","type":"main","index":4}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"ec86be5a-cd0b-4261-9e6b-6d52c0e5a15c","triggerCount":2,"tags":[]},{"createdAt":"2025-07-04T09:54:48.138Z","updatedAt":"2025-07-12T14:47:00.000Z","id":"iKr1hW88Za1MuqyO","name":"å“¦å¯¹çš„å¯¹çš„","active":false,"isArchived":false,"nodes":[{"parameters":{"fileSelector":"D:/Godot/RootsGodDoc/prompt/base_game_rule.md","options":{}},"type":"n8n-nodes-base.readWriteFile","typeVersion":1,"position":[780,-740],"id":"ed9e48cf-0d8b-4eaa-aa18-006bcee52fb5","name":"Read/Write Files from Disk"},{"parameters":{"operation":"text","destinationKey":"gamerule","options":{}},"type":"n8n-nodes-base.extractFromFile","typeVersion":1,"position":[1000,-740],"id":"51414c7c-7830-4ee1-8b8f-427f53743986","name":"gamerule"},{"parameters":{"fileSelector":"D:/Godot/RootsGodDoc/src/åè¯è§£é‡Š.md","options":{}},"type":"n8n-nodes-base.readWriteFile","typeVersion":1,"position":[780,-540],"id":"94459684-b91b-45b9-ada7-ba5d90314505","name":"Read/Write Files from Disk1"},{"parameters":{"operation":"text","destinationKey":"keyword","options":{}},"type":"n8n-nodes-base.extractFromFile","typeVersion":1,"position":[1000,-540],"id":"46ebcbca-c9a2-4741-8251-939f023a0e4d","name":"keyword"},{"parameters":{"operation":"text","destinationKey":"cards","options":{}},"type":"n8n-nodes-base.extractFromFile","typeVersion":1,"position":[1000,-340],"id":"9361db4f-fc12-496c-aa5a-8dcf638e043d","name":"Extract from File"},{"parameters":{"fileSelector":"D:/Godot/RootsGodDoc/src/å¡ç‰Œ/*.md","options":{}},"type":"n8n-nodes-base.readWriteFile","typeVersion":1,"position":[780,-340],"id":"b75fcc10-f15e-4e32-8565-dc8c1a97de09","name":"è·å–è…æ ¹ä¹‹é‡Œè®¾è®¡æ–‡æ¡£æ‰€æœ‰.mdæ ¼å¼æ–‡ä»¶"},{"parameters":{"fieldsToAggregate":{"fieldToAggregate":[{"fieldToAggregate":"cards"}]},"options":{}},"type":"n8n-nodes-base.aggregate","typeVersion":1,"position":[1180,-340],"id":"2ee21569-ed2a-44fe-8b25-f7647c60763c","name":"Aggregate"},{"parameters":{"numberInputs":5},"type":"n8n-nodes-base.merge","typeVersion":3.2,"position":[1700,-560],"id":"a4b58444-b3bc-48dd-992e-78dc64d44d85","name":"Merge"},{"parameters":{},"type":"n8n-nodes-base.noOp","typeVersion":1,"position":[1400,-940],"id":"c8c192da-ac29-47c2-94de-a43d44e26309","name":"No Operation, do nothing1"},{"parameters":{"fileSelector":"D:/Godot/RootsGodDoc/prompt/designer_mr_yes.md","options":{}},"type":"n8n-nodes-base.readWriteFile","typeVersion":1,"position":[780,-120],"id":"a4054301-0464-4825-98be-99bedafdbdeb","name":"Read/Write Files from Disk2"},{"parameters":{"operation":"text","destinationKey":"role","options":{}},"type":"n8n-nodes-base.extractFromFile","typeVersion":1,"position":[1000,-120],"id":"c2a69942-487b-4102-8f9b-9ace6e386c60","name":"role"},{"parameters":{"assignments":{"assignments":[{"id":"022b7722-a18c-4921-a7e0-0a6294d36d22","name":"cards","value":"={{ $json.cards.sort(() => Math.random()-0.5).slice(0, 5) }}","type":"array"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[1340,-440],"id":"7f5e65a9-c5a7-4f5f-9dae-3d95b961bd9b","name":"Edit Fields"},{"parameters":{},"type":"n8n-nodes-base.noOp","typeVersion":1,"position":[780,-940],"id":"88847f22-a203-4bf7-bcbe-417bffd375ea","name":"No Operation, do nothing"},{"parameters":{"inputSource":"jsonExample","jsonExample":"{\n\"sessionId\": \n\"89fc0c65b2a346f7846af3141d1ed04a\",\n\"chatInput\": \"test\"\n}"},"type":"n8n-nodes-base.executeWorkflowTrigger","typeVersion":1.1,"position":[480,-540],"id":"4b72456b-a189-4957-b20a-088e93631a37","name":"When Executed by Another Workflow"},{"parameters":{"promptType":"define","text":"={{ $json.data[0].chatInput }}","options":{"systemMessage":"={{ $json.data[4].role }}\n\n------\n\nä½ ç¿»é˜…äº†è®¾è®¡å¸ˆæ‰‹å†Œï¼š\n\n{{ $json.data[1].gamerule }}\n\n------\n\nä½ ç¿»çœ‹ç€äº†å¡ç‰Œå…³é”®å­—çš„åè¯è§£é‡Šï¼Œä½œä¸ºè®¾è®¡å‚è€ƒï¼š\n\n{{ $json.data[2].keyword }}\n\n------\n\nä½ éšæœºçš„ç¿»é˜…äº†ä¸€äº›ç°æœ‰çš„çœŸå®å¡ç‰Œè®¾è®¡æ¡ˆä¾‹ï¼Œè¯•å›¾ä»ä¸­æ‰¾å‡ºçµæ„Ÿï¼š\n\n{{ $json.data[3].cards }}"}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":2,"position":[2260,-520],"id":"01f0f4b0-60c5-4c47-9937-436f2e0426ce","name":"AI Agent"},{"parameters":{"model":"orieg/gemma3-tools:12b-it-qat","options":{"numCtx":32000}},"type":"@n8n/n8n-nodes-langchain.lmChatOllama","typeVersion":1,"position":[2260,-300],"id":"d47235e3-24a5-442d-ab53-38e2d279a813","name":"Ollama Chat Model","credentials":{"ollamaApi":{"id":"WKWM5nX6hbkv8Cs5","name":"Ollama account"}}},{"parameters":{"aggregate":"aggregateAllItemData","options":{}},"type":"n8n-nodes-base.aggregate","typeVersion":1,"position":[1940,-520],"id":"1c77f73d-acdc-43a5-a138-cedd6ea16cec","name":"data"},{"parameters":{"workflowId":{"__rl":true,"value":"SATzPo7dqpxjn3Jc","mode":"list","cachedResultName":"è¿½åŠ è®¨è®º"},"workflowInputs":{"mappingMode":"defineBelow","value":{"sessionId":"={{ $('When Executed by Another Workflow').item.json.sessionId }}","chatInput":"=------\n\n{{ $json.output }}"},"matchingColumns":[],"schema":[{"id":"sessionId","displayName":"sessionId","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"string"},{"id":"chatInput","displayName":"chatInput","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"string"}],"attemptToConvertTypes":false,"convertFieldsToString":true},"mode":"each","options":{"waitForSubWorkflow":true}},"type":"n8n-nodes-base.executeWorkflow","typeVersion":1.2,"position":[2640,-520],"id":"9e26b8e7-70ea-40bc-a351-f28f64226222","name":"join1","alwaysOutputData":false}],"connections":{"Read/Write Files from Disk":{"main":[[{"node":"gamerule","type":"main","index":0}]]},"gamerule":{"main":[[{"node":"Merge","type":"main","index":1}]]},"Read/Write Files from Disk1":{"main":[[{"node":"keyword","type":"main","index":0}]]},"keyword":{"main":[[{"node":"Merge","type":"main","index":2}]]},"Extract from File":{"main":[[{"node":"Aggregate","type":"main","index":0}]]},"è·å–è…æ ¹ä¹‹é‡Œè®¾è®¡æ–‡æ¡£æ‰€æœ‰.mdæ ¼å¼æ–‡ä»¶":{"main":[[{"node":"Extract from File","type":"main","index":0}]]},"Aggregate":{"main":[[{"node":"Edit Fields","type":"main","index":0}]]},"No Operation, do nothing1":{"main":[[{"node":"Merge","type":"main","index":0}]]},"Read/Write Files from Disk2":{"main":[[{"node":"role","type":"main","index":0}]]},"role":{"main":[[{"node":"Merge","type":"main","index":4}]]},"Edit Fields":{"main":[[{"node":"Merge","type":"main","index":3}]]},"No Operation, do nothing":{"main":[[{"node":"No Operation, do nothing1","type":"main","index":0}]]},"When Executed by Another Workflow":{"main":[[{"node":"No Operation, do nothing","type":"main","index":0},{"node":"Read/Write Files from Disk","type":"main","index":0},{"node":"Read/Write Files from Disk1","type":"main","index":0},{"node":"è·å–è…æ ¹ä¹‹é‡Œè®¾è®¡æ–‡æ¡£æ‰€æœ‰.mdæ ¼å¼æ–‡ä»¶","type":"main","index":0},{"node":"Read/Write Files from Disk2","type":"main","index":0}]]},"Merge":{"main":[[{"node":"data","type":"main","index":0}]]},"Ollama Chat Model":{"ai_languageModel":[[{"node":"AI Agent","type":"ai_languageModel","index":0}]]},"data":{"main":[[{"node":"AI Agent","type":"main","index":0}]]},"AI Agent":{"main":[[{"node":"join1","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{"When Executed by Another Workflow":[{"json":{"sessionId":"89fc0c65b2a346f7846af3141d1ed04a","chatInput":"test"}}]},"versionId":"5240b76c-593f-4154-962d-7287d47ab6dc","triggerCount":0,"tags":[]},{"createdAt":"2025-07-04T09:54:59.011Z","updatedAt":"2025-07-12T14:47:25.000Z","id":"kEp6ypkrFvb24CQ0","name":"å“¦ä¸å¯¹ä¸å¯¹","active":false,"isArchived":false,"nodes":[{"parameters":{"fileSelector":"D:/Godot/RootsGodDoc/prompt/base_game_rule.md","options":{}},"type":"n8n-nodes-base.readWriteFile","typeVersion":1,"position":[-1200,-380],"id":"d23c224f-8068-47f7-ae7a-f79b1cc09164","name":"Read/Write Files from Disk"},{"parameters":{"operation":"text","destinationKey":"gamerule","options":{}},"type":"n8n-nodes-base.extractFromFile","typeVersion":1,"position":[-980,-380],"id":"347c129a-0409-4e43-a4c4-b5fe1925c5b5","name":"gamerule"},{"parameters":{"fileSelector":"D:/Godot/RootsGodDoc/src/åè¯è§£é‡Š.md","options":{}},"type":"n8n-nodes-base.readWriteFile","typeVersion":1,"position":[-1200,-180],"id":"27acb94a-2ecb-47a8-a314-4b3b6ebda7f5","name":"Read/Write Files from Disk1"},{"parameters":{"operation":"text","destinationKey":"keyword","options":{}},"type":"n8n-nodes-base.extractFromFile","typeVersion":1,"position":[-980,-180],"id":"08844b7c-022e-41f2-acad-2f98693153ee","name":"keyword"},{"parameters":{"operation":"text","destinationKey":"cards","options":{}},"type":"n8n-nodes-base.extractFromFile","typeVersion":1,"position":[-980,40],"id":"7241014a-a36c-4699-a060-46c349100660","name":"Extract from File"},{"parameters":{"fileSelector":"D:/Godot/RootsGodDoc/src/å¡ç‰Œ/*.md","options":{}},"type":"n8n-nodes-base.readWriteFile","typeVersion":1,"position":[-1200,40],"id":"cbcc87b4-6abe-4d1e-a237-a06f2f88f2c9","name":"è·å–è…æ ¹ä¹‹é‡Œè®¾è®¡æ–‡æ¡£æ‰€æœ‰.mdæ ¼å¼æ–‡ä»¶"},{"parameters":{"fieldsToAggregate":{"fieldToAggregate":[{"fieldToAggregate":"cards"}]},"options":{}},"type":"n8n-nodes-base.aggregate","typeVersion":1,"position":[-800,40],"id":"c5908729-809f-4820-9462-4e1ede35a61a","name":"Aggregate"},{"parameters":{"numberInputs":5},"type":"n8n-nodes-base.merge","typeVersion":3.2,"position":[-280,-200],"id":"35817d5e-2acc-4ced-a914-33bd2819d566","name":"Merge"},{"parameters":{},"type":"n8n-nodes-base.noOp","typeVersion":1,"position":[-580,-580],"id":"c0439575-1872-4016-a98c-ce8d14a8be00","name":"No Operation, do nothing1"},{"parameters":{"fileSelector":"D:/Godot/RootsGodDoc/prompt/designer_mr_no.md","options":{}},"type":"n8n-nodes-base.readWriteFile","typeVersion":1,"position":[-1200,260],"id":"180606c8-b502-4f4b-9240-bdc6700c1601","name":"Read/Write Files from Disk2"},{"parameters":{"operation":"text","destinationKey":"role","options":{}},"type":"n8n-nodes-base.extractFromFile","typeVersion":1,"position":[-980,260],"id":"497748f8-30a0-4b61-ab60-4bc0f5262cb3","name":"role"},{"parameters":{"assignments":{"assignments":[{"id":"022b7722-a18c-4921-a7e0-0a6294d36d22","name":"cards","value":"={{ $json.cards.sort(() => Math.random()-0.5).slice(0, 5) }}","type":"array"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-640,-80],"id":"39560653-eb4a-498b-9fb0-ebf0846656c5","name":"Edit Fields"},{"parameters":{},"type":"n8n-nodes-base.noOp","typeVersion":1,"position":[-1200,-580],"id":"72faf615-1062-432d-a583-958e05a0ee88","name":"No Operation, do nothing"},{"parameters":{"inputSource":"jsonExample","jsonExample":"{\n\"sessionId\": \n\"89fc0c65b2a346f7846af3141d1ed04a\",\n\"chatInput\": \"test\"\n}"},"type":"n8n-nodes-base.executeWorkflowTrigger","typeVersion":1.1,"position":[-1500,-180],"id":"768877b3-9fa0-46aa-bc61-0170e627909f","name":"When Executed by Another Workflow"},{"parameters":{"promptType":"define","text":"={{ $json.data[0].chatInput }}","options":{"systemMessage":"={{ $json.data[4].role }}\n\n------\n\nä½ ç¿»é˜…äº†è®¾è®¡å¸ˆæ‰‹å†Œï¼š\n\n{{ $json.data[1].gamerule }}\n\n------\n\nä½ ç¿»çœ‹ç€äº†å¡ç‰Œå…³é”®å­—çš„åè¯è§£é‡Šï¼Œä½œä¸ºè®¾è®¡å‚è€ƒï¼š\n\n{{ $json.data[2].keyword }}\n\n------\n\nä½ éšæœºçš„ç¿»é˜…äº†ä¸€äº›ç°æœ‰çš„çœŸå®å¡ç‰Œè®¾è®¡æ¡ˆä¾‹ï¼Œè¯•å›¾ä»ä¸­æ‰¾å‡ºçµæ„Ÿï¼š\n\n{{ $json.data[3].cards }}"}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":2,"position":[280,-160],"id":"63fb38dc-bb66-4d4f-9e41-45b8b4614e44","name":"AI Agent"},{"parameters":{"model":"orieg/gemma3-tools:12b-it-qat","options":{"numCtx":32000}},"type":"@n8n/n8n-nodes-langchain.lmChatOllama","typeVersion":1,"position":[280,80],"id":"db23d13c-ff8c-49c1-8cb2-99946015a792","name":"Ollama Chat Model","credentials":{"ollamaApi":{"id":"WKWM5nX6hbkv8Cs5","name":"Ollama account"}}},{"parameters":{"aggregate":"aggregateAllItemData","options":{}},"type":"n8n-nodes-base.aggregate","typeVersion":1,"position":[-40,-160],"id":"f0053b5a-519c-45ac-ad28-4a828a083e5f","name":"data"},{"parameters":{"workflowId":{"__rl":true,"value":"SATzPo7dqpxjn3Jc","mode":"list","cachedResultName":"è¿½åŠ è®¨è®º"},"workflowInputs":{"mappingMode":"defineBelow","value":{"sessionId":"={{ $('When Executed by Another Workflow').item.json.sessionId }}","chatInput":"=------\n\n{{ $json.output }}"},"matchingColumns":[],"schema":[{"id":"sessionId","displayName":"sessionId","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"string"},{"id":"chatInput","displayName":"chatInput","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"string"}],"attemptToConvertTypes":false,"convertFieldsToString":true},"mode":"each","options":{"waitForSubWorkflow":true}},"type":"n8n-nodes-base.executeWorkflow","typeVersion":1.2,"position":[680,-160],"id":"7f8f239a-bb46-4c55-802d-921fefc43a87","name":"join1","alwaysOutputData":false}],"connections":{"Read/Write Files from Disk":{"main":[[{"node":"gamerule","type":"main","index":0}]]},"gamerule":{"main":[[{"node":"Merge","type":"main","index":1}]]},"Read/Write Files from Disk1":{"main":[[{"node":"keyword","type":"main","index":0}]]},"keyword":{"main":[[{"node":"Merge","type":"main","index":2}]]},"Extract from File":{"main":[[{"node":"Aggregate","type":"main","index":0}]]},"è·å–è…æ ¹ä¹‹é‡Œè®¾è®¡æ–‡æ¡£æ‰€æœ‰.mdæ ¼å¼æ–‡ä»¶":{"main":[[{"node":"Extract from File","type":"main","index":0}]]},"Aggregate":{"main":[[{"node":"Edit Fields","type":"main","index":0}]]},"Merge":{"main":[[{"node":"data","type":"main","index":0}]]},"No Operation, do nothing1":{"main":[[{"node":"Merge","type":"main","index":0}]]},"Read/Write Files from Disk2":{"main":[[{"node":"role","type":"main","index":0}]]},"role":{"main":[[{"node":"Merge","type":"main","index":4}]]},"Edit Fields":{"main":[[{"node":"Merge","type":"main","index":3}]]},"No Operation, do nothing":{"main":[[{"node":"No Operation, do nothing1","type":"main","index":0}]]},"When Executed by Another Workflow":{"main":[[{"node":"No Operation, do nothing","type":"main","index":0},{"node":"Read/Write Files from Disk","type":"main","index":0},{"node":"Read/Write Files from Disk1","type":"main","index":0},{"node":"è·å–è…æ ¹ä¹‹é‡Œè®¾è®¡æ–‡æ¡£æ‰€æœ‰.mdæ ¼å¼æ–‡ä»¶","type":"main","index":0},{"node":"Read/Write Files from Disk2","type":"main","index":0}]]},"AI Agent":{"main":[[{"node":"join1","type":"main","index":0}]]},"Ollama Chat Model":{"ai_languageModel":[[{"node":"AI Agent","type":"ai_languageModel","index":0}]]},"data":{"main":[[{"node":"AI Agent","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":null,"pinData":{"When Executed by Another Workflow":[{"json":{"sessionId":"89fc0c65b2a346f7846af3141d1ed04a","chatInput":"test"}}]},"versionId":"a0a87878-115f-47c7-8fe0-e2ab3e379b31","triggerCount":0,"tags":[]},{"createdAt":"2025-07-04T09:55:11.643Z","updatedAt":"2025-07-12T14:47:13.000Z","id":"unPifl1sDq1G4QsS","name":"å“¦å¯¹ã€‚ã€‚å¯¹ä¹ˆï¼Ÿ","active":false,"isArchived":false,"nodes":[{"parameters":{"fileSelector":"D:/Godot/RootsGodDoc/prompt/base_game_rule.md","options":{}},"type":"n8n-nodes-base.readWriteFile","typeVersion":1,"position":[0,200],"id":"cf5438ab-e793-4a56-8a6e-f986d57658ad","name":"Read/Write Files from Disk"},{"parameters":{"operation":"text","destinationKey":"gamerule","options":{}},"type":"n8n-nodes-base.extractFromFile","typeVersion":1,"position":[220,200],"id":"d7703bb9-b9f0-48aa-9374-4e4b06f191c9","name":"gamerule"},{"parameters":{"fileSelector":"D:/Godot/RootsGodDoc/src/åè¯è§£é‡Š.md","options":{}},"type":"n8n-nodes-base.readWriteFile","typeVersion":1,"position":[0,400],"id":"a81fc834-22ac-4266-8d77-ff56602503f5","name":"Read/Write Files from Disk1"},{"parameters":{"operation":"text","destinationKey":"keyword","options":{}},"type":"n8n-nodes-base.extractFromFile","typeVersion":1,"position":[220,400],"id":"10356ad5-1b49-4ab1-bdb1-b10e5dfccf2b","name":"keyword"},{"parameters":{"operation":"text","destinationKey":"cards","options":{}},"type":"n8n-nodes-base.extractFromFile","typeVersion":1,"position":[220,600],"id":"0210bdb5-970c-4070-a5ea-0d6528ad051b","name":"Extract from File"},{"parameters":{"fileSelector":"D:/Godot/RootsGodDoc/src/å¡ç‰Œ/*.md","options":{}},"type":"n8n-nodes-base.readWriteFile","typeVersion":1,"position":[0,600],"id":"134310b8-a9ff-487c-b1c2-3e9749277e7b","name":"è·å–è…æ ¹ä¹‹é‡Œè®¾è®¡æ–‡æ¡£æ‰€æœ‰.mdæ ¼å¼æ–‡ä»¶"},{"parameters":{"fieldsToAggregate":{"fieldToAggregate":[{"fieldToAggregate":"cards"}]},"options":{}},"type":"n8n-nodes-base.aggregate","typeVersion":1,"position":[400,600],"id":"5bbb660a-67c7-46b2-a991-f35b8dc8941b","name":"Aggregate"},{"parameters":{"numberInputs":5},"type":"n8n-nodes-base.merge","typeVersion":3.2,"position":[920,380],"id":"fbed30b1-cdf6-4c69-ab8b-10788b588300","name":"Merge"},{"parameters":{},"type":"n8n-nodes-base.noOp","typeVersion":1,"position":[620,0],"id":"879e18de-d06c-424b-8c17-34540de5d9d1","name":"No Operation, do nothing1"},{"parameters":{"fileSelector":"D:/Godot/RootsGodDoc/prompt/designer_mr_if.md","options":{}},"type":"n8n-nodes-base.readWriteFile","typeVersion":1,"position":[0,820],"id":"343556e8-3985-4309-8cac-37eec5a9b44a","name":"Read/Write Files from Disk2"},{"parameters":{"operation":"text","destinationKey":"role","options":{}},"type":"n8n-nodes-base.extractFromFile","typeVersion":1,"position":[220,820],"id":"17b22589-6c7c-42fa-878b-b0be9e73ab91","name":"role"},{"parameters":{"assignments":{"assignments":[{"id":"022b7722-a18c-4921-a7e0-0a6294d36d22","name":"cards","value":"={{ $json.cards.sort(() => Math.random()-0.5).slice(0, 5) }}","type":"array"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[560,500],"id":"f9a6ad5f-bfd0-4726-a767-f97017793b15","name":"Edit Fields"},{"parameters":{},"type":"n8n-nodes-base.noOp","typeVersion":1,"position":[0,0],"id":"2faf6042-c455-4eeb-ae7b-488685912fa3","name":"No Operation, do nothing"},{"parameters":{"inputSource":"jsonExample","jsonExample":"{\n\"sessionId\": \n\"89fc0c65b2a346f7846af3141d1ed04a\",\n\"chatInput\": \"test\"\n}"},"type":"n8n-nodes-base.executeWorkflowTrigger","typeVersion":1.1,"position":[-300,400],"id":"ef089b68-911f-4f37-bc14-9fad2bdfee00","name":"When Executed by Another Workflow"},{"parameters":{"promptType":"define","text":"={{ $json.data[0].chatInput }}","options":{"systemMessage":"={{ $json.data[4].role }}\n\n------\n\nä½ ç¿»é˜…äº†è®¾è®¡å¸ˆæ‰‹å†Œï¼š\n\n{{ $json.data[1].gamerule }}\n\n------\n\nä½ ç¿»çœ‹ç€äº†å¡ç‰Œå…³é”®å­—çš„åè¯è§£é‡Šï¼Œä½œä¸ºè®¾è®¡å‚è€ƒï¼š\n\n{{ $json.data[2].keyword }}\n\n------\n\nä½ éšæœºçš„ç¿»é˜…äº†ä¸€äº›ç°æœ‰çš„çœŸå®å¡ç‰Œè®¾è®¡æ¡ˆä¾‹ï¼Œè¯•å›¾ä»ä¸­æ‰¾å‡ºçµæ„Ÿï¼š\n\n{{ $json.data[3].cards }}"}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":2,"position":[1480,420],"id":"1c65977e-9b6c-4b01-8772-4be3f23a8ca8","name":"AI Agent"},{"parameters":{"model":"orieg/gemma3-tools:12b-it-qat","options":{"numCtx":32000}},"type":"@n8n/n8n-nodes-langchain.lmChatOllama","typeVersion":1,"position":[1480,640],"id":"7cf30290-cd58-4c28-b9fc-14af2b0cb880","name":"Ollama Chat Model","credentials":{"ollamaApi":{"id":"WKWM5nX6hbkv8Cs5","name":"Ollama account"}}},{"parameters":{"aggregate":"aggregateAllItemData","options":{}},"type":"n8n-nodes-base.aggregate","typeVersion":1,"position":[1160,420],"id":"ce244dae-2977-43e1-a7ed-9cbdafda55d4","name":"data"},{"parameters":{"workflowId":{"__rl":true,"value":"SATzPo7dqpxjn3Jc","mode":"list","cachedResultName":"è¿½åŠ è®¨è®º"},"workflowInputs":{"mappingMode":"defineBelow","value":{"sessionId":"={{ $('When Executed by Another Workflow').item.json.sessionId }}","chatInput":"=------\n\n{{ $json.output }}"},"matchingColumns":[],"schema":[{"id":"sessionId","displayName":"sessionId","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"string"},{"id":"chatInput","displayName":"chatInput","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"string"}],"attemptToConvertTypes":false,"convertFieldsToString":true},"mode":"each","options":{"waitForSubWorkflow":true}},"type":"n8n-nodes-base.executeWorkflow","typeVersion":1.2,"position":[1860,420],"id":"ef511840-8bac-42c4-b8fd-bb31431061f1","name":"join1","alwaysOutputData":false}],"connections":{"Read/Write Files from Disk":{"main":[[{"node":"gamerule","type":"main","index":0}]]},"gamerule":{"main":[[{"node":"Merge","type":"main","index":1}]]},"Read/Write Files from Disk1":{"main":[[{"node":"keyword","type":"main","index":0}]]},"keyword":{"main":[[{"node":"Merge","type":"main","index":2}]]},"Extract from File":{"main":[[{"node":"Aggregate","type":"main","index":0}]]},"è·å–è…æ ¹ä¹‹é‡Œè®¾è®¡æ–‡æ¡£æ‰€æœ‰.mdæ ¼å¼æ–‡ä»¶":{"main":[[{"node":"Extract from File","type":"main","index":0}]]},"Aggregate":{"main":[[{"node":"Edit Fields","type":"main","index":0}]]},"Merge":{"main":[[{"node":"data","type":"main","index":0}]]},"No Operation, do nothing1":{"main":[[{"node":"Merge","type":"main","index":0}]]},"Read/Write Files from Disk2":{"main":[[{"node":"role","type":"main","index":0}]]},"role":{"main":[[{"node":"Merge","type":"main","index":4}]]},"Edit Fields":{"main":[[{"node":"Merge","type":"main","index":3}]]},"No Operation, do nothing":{"main":[[{"node":"No Operation, do nothing1","type":"main","index":0}]]},"When Executed by Another Workflow":{"main":[[{"node":"No Operation, do nothing","type":"main","index":0},{"node":"Read/Write Files from Disk","type":"main","index":0},{"node":"Read/Write Files from Disk1","type":"main","index":0},{"node":"è·å–è…æ ¹ä¹‹é‡Œè®¾è®¡æ–‡æ¡£æ‰€æœ‰.mdæ ¼å¼æ–‡ä»¶","type":"main","index":0},{"node":"Read/Write Files from Disk2","type":"main","index":0}]]},"AI Agent":{"main":[[{"node":"join1","type":"main","index":0}]]},"Ollama Chat Model":{"ai_languageModel":[[{"node":"AI Agent","type":"ai_languageModel","index":0}]]},"data":{"main":[[{"node":"AI Agent","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":null,"pinData":{"When Executed by Another Workflow":[{"json":{"sessionId":"89fc0c65b2a346f7846af3141d1ed04a","chatInput":"test"}}]},"versionId":"4b989925-7b19-433a-8052-b1b1ea660274","triggerCount":0,"tags":[]},{"createdAt":"2025-07-05T03:42:14.545Z","updatedAt":"2025-07-12T19:42:37.000Z","id":"V2S2Y1Zx7iS7JmH3","name":"å®‡å®™æœ¯è®¨è®ºä¼šä¸»æŒäººï¼šä»£å·æˆ´ä½³ä¼Ÿ","active":true,"isArchived":false,"nodes":[{"parameters":{"public":true,"options":{}},"type":"@n8n/n8n-nodes-langchain.chatTrigger","typeVersion":1.1,"position":[-460,600],"id":"aaba8b4d-7a50-47c0-9919-eece679e5fdf","name":"When chat message received","webhookId":"3392e37c-5448-4196-8871-7a949490f614"},{"parameters":{"model":"orieg/gemma3-tools:12b-it-qat","options":{"keepAlive":"2h","numCtx":32000}},"type":"@n8n/n8n-nodes-langchain.lmChatOllama","typeVersion":1,"position":[1760,1000],"id":"7272a532-9ac8-4dc2-a82f-80c9bc2f0d82","name":"Ollama Chat Model","credentials":{"ollamaApi":{"id":"WKWM5nX6hbkv8Cs5","name":"Ollama account"}}},{"parameters":{"fileSelector":"D:/Godot/RootsGodDoc/prompt/base_game_rule.md","options":{}},"type":"n8n-nodes-base.readWriteFile","typeVersion":1,"position":[360,400],"id":"d281aa4b-bbeb-40a3-8b89-25c15d47a84f","name":"Read/Write Files from Disk"},{"parameters":{"operation":"text","destinationKey":"gamerule","options":{}},"type":"n8n-nodes-base.extractFromFile","typeVersion":1,"position":[580,400],"id":"61c08d92-4bea-4c2f-9f72-26ec9163deb1","name":"gamerule"},{"parameters":{"fileSelector":"D:/Godot/RootsGodDoc/src/åè¯è§£é‡Š.md","options":{}},"type":"n8n-nodes-base.readWriteFile","typeVersion":1,"position":[360,600],"id":"c729d631-e5b0-4fef-8dad-012b4df6d8d1","name":"Read/Write Files from Disk1"},{"parameters":{"operation":"text","destinationKey":"keyword","options":{}},"type":"n8n-nodes-base.extractFromFile","typeVersion":1,"position":[580,600],"id":"fc5d8e11-5f7d-463e-8704-84231ade1065","name":"keyword"},{"parameters":{"operation":"text","destinationKey":"cards","options":{}},"type":"n8n-nodes-base.extractFromFile","typeVersion":1,"position":[580,800],"id":"30b96019-d090-4932-9125-520fe43f0715","name":"Extract from File"},{"parameters":{"fileSelector":"D:/Godot/RootsGodDoc/src/å¡ç‰Œ/*.md","options":{}},"type":"n8n-nodes-base.readWriteFile","typeVersion":1,"position":[360,800],"id":"fc26266d-452e-4074-9f2b-d958f9e3a029","name":"è·å–è…æ ¹ä¹‹é‡Œè®¾è®¡æ–‡æ¡£æ‰€æœ‰.mdæ ¼å¼æ–‡ä»¶"},{"parameters":{"fieldsToAggregate":{"fieldToAggregate":[{"fieldToAggregate":"cards"}]},"options":{}},"type":"n8n-nodes-base.aggregate","typeVersion":1,"position":[760,800],"id":"c307289f-cc87-47d1-9d13-002df1097632","name":"Aggregate"},{"parameters":{"numberInputs":6},"type":"n8n-nodes-base.merge","typeVersion":3.2,"position":[1280,560],"id":"8556b406-0ea8-44e1-9aaf-9133268a5e7a","name":"Merge"},{"parameters":{"fileSelector":"D:/Godot/RootsGodDoc/prompt/designer_master.md","options":{}},"type":"n8n-nodes-base.readWriteFile","typeVersion":1,"position":[360,1020],"id":"3cc76b14-7a20-46f7-9c6b-9e2eafd3f65b","name":"Read/Write Files from Disk2"},{"parameters":{"operation":"text","destinationKey":"role","options":{}},"type":"n8n-nodes-base.extractFromFile","typeVersion":1,"position":[580,1020],"id":"2d2af7a2-856f-4636-ba86-897cf39595d0","name":"role"},{"parameters":{"fileSelector":"D:/Godot/RootsGodDoc/prompt/designer_master_assistant.md","options":{}},"type":"n8n-nodes-base.readWriteFile","typeVersion":1,"position":[360,1240],"id":"d555d5bf-3b60-4c9e-b17e-6d8960676af1","name":"Read/Write Files from Disk3"},{"parameters":{"operation":"text","destinationKey":"assistant","options":{}},"type":"n8n-nodes-base.extractFromFile","typeVersion":1,"position":[580,1240],"id":"1a3922b7-fded-4ba7-b6bd-eeeec2c76118","name":"assistant"},{"parameters":{"assignments":{"assignments":[{"id":"022b7722-a18c-4921-a7e0-0a6294d36d22","name":"cards","value":"={{ $json.cards.sort(() => Math.random()-0.5).slice(0, 5) }}","type":"array"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[920,700],"id":"53d86b47-e640-46ca-8bbb-3b3bc3eb565d","name":"Edit Fields"},{"parameters":{"aggregate":"aggregateAllItemData","options":{}},"type":"n8n-nodes-base.aggregate","typeVersion":1,"position":[1500,620],"id":"f22d379a-21d8-48db-8974-f742caae77cb","name":"data"},{"parameters":{"promptType":"define","text":"={{ $json.data[0].chatInput }}","options":{"systemMessage":"={{ $json.data[4].role }}"}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":2,"position":[1760,620],"id":"dbdec2c4-4e2b-4624-b208-2cee6ed12563","name":"ä¸»æŒäºº"},{"parameters":{"promptType":"define","text":"={{ $('ä¸»æŒäºº').item.json.output }}","options":{"systemMessage":"={{ $('data').item.json.data[5].assistant }}"}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":2,"position":[2460,620],"id":"91512891-5cd7-471d-b0c2-f14eec1c00cb","name":"switch"},{"parameters":{"rules":{"values":[{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"leftValue":"={{ $json.output }}","rightValue":"åˆ¶ä½œäºº","operator":{"type":"string","operation":"contains"},"id":"fcfc7505-45a7-4671-94a8-3c1c4db9ccc5"}],"combinator":"and"}},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"c836d08f-c7e3-4b7f-a288-1e2fd46b678f","leftValue":"={{ $json.output }}","rightValue":"æ€ç»´å‘æ•£çš„è®¾è®¡å¸ˆ","operator":{"type":"string","operation":"contains"}}],"combinator":"and"}},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"f17cee5b-d975-4152-b410-240a40cd9046","leftValue":"={{ $json.output }}","rightValue":"æŒ‘å‰”ä¸¥è‹›çš„è®¾è®¡å¸ˆ","operator":{"type":"string","operation":"contains"}}],"combinator":"and"}},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"761f1e34-7b11-47a4-8884-d041b0909b97","leftValue":"={{ $json.output }}","rightValue":"å®¢è§‚ä¸¥è°¨çš„è®¾è®¡å¸ˆ","operator":{"type":"string","operation":"contains"}}],"combinator":"and"}}]},"options":{"allMatchingOutputs":false}},"type":"n8n-nodes-base.switch","typeVersion":3.2,"position":[3180,600],"id":"2899c119-cc12-4ce3-bc98-338d4763e727","name":"Switch"},{"parameters":{},"type":"n8n-nodes-base.noOp","typeVersion":1,"position":[100,600],"id":"ca8eabb4-611f-4039-8920-63b9f96c5cde","name":"start"},{"parameters":{"workflowId":{"__rl":true,"value":"SATzPo7dqpxjn3Jc","mode":"list","cachedResultName":"è¿½åŠ è®¨è®º"},"workflowInputs":{"mappingMode":"defineBelow","value":{"sessionId":"={{ $json.sessionId }}","chatInput":"=------\n\n{{ $json.chatInput }}"},"matchingColumns":[],"schema":[{"id":"sessionId","displayName":"sessionId","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"string"},{"id":"chatInput","displayName":"chatInput","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"string"}],"attemptToConvertTypes":false,"convertFieldsToString":true},"mode":"each","options":{"waitForSubWorkflow":true}},"type":"n8n-nodes-base.executeWorkflow","typeVersion":1.2,"position":[360,200],"id":"79e7ab2d-3668-4e6c-9733-959b8f45567b","name":"join","alwaysOutputData":false},{"parameters":{"workflowId":{"__rl":true,"value":"SATzPo7dqpxjn3Jc","mode":"list","cachedResultName":"è¿½åŠ è®¨è®º"},"workflowInputs":{"mappingMode":"defineBelow","value":{"sessionId":"={{ $('data').item.json.data[0].sessionId }}","chatInput":"=------\n\n{{ $json.output }}"},"matchingColumns":[],"schema":[{"id":"sessionId","displayName":"sessionId","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"string"},{"id":"chatInput","displayName":"chatInput","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"string"}],"attemptToConvertTypes":false,"convertFieldsToString":true},"mode":"each","options":{"waitForSubWorkflow":true}},"type":"n8n-nodes-base.executeWorkflow","typeVersion":1.2,"position":[2180,620],"id":"4648dd99-c68a-4d71-94ae-4991dded9f3e","name":"join1","alwaysOutputData":false},{"parameters":{"assignments":{"assignments":[{"id":"c7eb78e4-f6ef-4dda-ba65-80f20fb7ce28","name":"sessionId","value":"={{ $('data').item.json.data[0].sessionId }}","type":"string"},{"id":"122befb2-1a32-493d-80e2-f7486a61a9f7","name":"chatInput","value":"={{ $('join1').item.json.chatInput }}","type":"string"},{"id":"6d9f7e0e-7377-4b43-95b9-7391a8af854a","name":"output","value":"={{ $json.output }}","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[2860,620],"id":"ff684296-f43c-42aa-8095-ebe6e6de3f55","name":"Edit Fields1"},{"parameters":{"workflowId":{"__rl":true,"value":"unPifl1sDq1G4QsS","mode":"list","cachedResultName":"å“¦å¯¹ã€‚ã€‚å¯¹ä¹ˆï¼Ÿ"},"workflowInputs":{"mappingMode":"defineBelow","value":{"sessionId":"={{ $json.sessionId }}","chatInput":"={{ $json.chatInput }}"},"matchingColumns":[],"schema":[{"id":"sessionId","displayName":"sessionId","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"string"},{"id":"chatInput","displayName":"chatInput","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"string"}],"attemptToConvertTypes":false,"convertFieldsToString":true},"mode":"each","options":{"waitForSubWorkflow":true}},"type":"n8n-nodes-base.executeWorkflow","typeVersion":1.2,"position":[3540,980],"id":"29960518-ec87-4b23-a730-50fca934377d","name":"Execute Workflow2"},{"parameters":{"workflowId":{"__rl":true,"value":"iKr1hW88Za1MuqyO","mode":"list","cachedResultName":"å“¦å¯¹çš„å¯¹çš„"},"workflowInputs":{"mappingMode":"defineBelow","value":{"sessionId":"={{ $json.sessionId }}","chatInput":"={{ $json.chatInput }}"},"matchingColumns":[],"schema":[{"id":"sessionId","displayName":"sessionId","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"string"},{"id":"chatInput","displayName":"chatInput","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"string"}],"attemptToConvertTypes":false,"convertFieldsToString":true},"mode":"each","options":{"waitForSubWorkflow":true}},"type":"n8n-nodes-base.executeWorkflow","typeVersion":1.2,"position":[3540,640],"id":"a9445b70-e075-4d39-a725-f6d548a2887f","name":"Execute Workflow"},{"parameters":{"workflowId":{"__rl":true,"value":"kEp6ypkrFvb24CQ0","mode":"list","cachedResultName":"å“¦ä¸å¯¹ä¸å¯¹"},"workflowInputs":{"mappingMode":"defineBelow","value":{"sessionId":"={{ $json.sessionId }}","chatInput":"={{ $json.chatInput }}"},"matchingColumns":[],"schema":[{"id":"sessionId","displayName":"sessionId","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"string"},{"id":"chatInput","displayName":"chatInput","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"string"}],"attemptToConvertTypes":false,"convertFieldsToString":true},"mode":"each","options":{"waitForSubWorkflow":true}},"type":"n8n-nodes-base.executeWorkflow","typeVersion":1.2,"position":[3540,800],"id":"27d0d302-1b5b-4391-97b8-a5ddecb0e9a3","name":"Execute Workflow1"},{"parameters":{"workflowId":{"__rl":true,"value":"V2S2Y1Zx7iS7JmH3","mode":"list","cachedResultName":"å®‡å®™æœ¯è®¨è®ºä¼šä¸»æŒäººï¼šä»£å·æˆ´ä½³ä¼Ÿ"},"workflowInputs":{"mappingMode":"defineBelow","value":{"sessionId":"={{ $json.sessionId }}","chatInput":"------"},"matchingColumns":[],"schema":[{"id":"sessionId","displayName":"sessionId","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"string"},{"id":"chatInput","displayName":"chatInput","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"string","removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":true},"mode":"each","options":{"waitForSubWorkflow":true}},"type":"n8n-nodes-base.executeWorkflow","typeVersion":1.2,"position":[3800,800],"id":"570106ce-b225-4697-9cec-e6955b180fa9","name":"äº¤å›ä¸»æŒäºº"},{"parameters":{"assignments":{"assignments":[{"id":"0c3917f6-6acd-49ca-81a3-7bcf79790041","name":"sessionId","value":"={{ $json.sessionId }}","type":"string"},{"id":"dc683cc3-142d-442a-a825-649e6f5703f1","name":"chatInput","value":"=åˆ¶ä½œäººï¼š{{ $json.chatInput }}","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-180,600],"id":"21c46774-2c65-4f8d-a8ac-cefbb061e642","name":"åˆ¶ä½œäººï¼š"},{"parameters":{"inputSource":"jsonExample","jsonExample":"{\n\"sessionId\": \n\"89fc0c65b2a346f7846af3141d1ed04a\",\n\"chatInput\": \"test\"\n}"},"type":"n8n-nodes-base.executeWorkflowTrigger","typeVersion":1.1,"position":[-180,400],"id":"2cad277b-31e7-4345-a320-99e6280b8b19","name":"When Executed by Another Workflow"}],"connections":{"When chat message received":{"main":[[{"node":"åˆ¶ä½œäººï¼š","type":"main","index":0}]]},"Ollama Chat Model":{"ai_languageModel":[[{"node":"ä¸»æŒäºº","type":"ai_languageModel","index":0},{"node":"switch","type":"ai_languageModel","index":0}]]},"Read/Write Files from Disk":{"main":[[{"node":"gamerule","type":"main","index":0}]]},"gamerule":{"main":[[{"node":"Merge","type":"main","index":1}]]},"Read/Write Files from Disk1":{"main":[[{"node":"keyword","type":"main","index":0}]]},"keyword":{"main":[[{"node":"Merge","type":"main","index":2}]]},"Extract from File":{"main":[[{"node":"Aggregate","type":"main","index":0}]]},"è·å–è…æ ¹ä¹‹é‡Œè®¾è®¡æ–‡æ¡£æ‰€æœ‰.mdæ ¼å¼æ–‡ä»¶":{"main":[[{"node":"Extract from File","type":"main","index":0}]]},"Aggregate":{"main":[[{"node":"Edit Fields","type":"main","index":0}]]},"Merge":{"main":[[{"node":"data","type":"main","index":0}]]},"Read/Write Files from Disk2":{"main":[[{"node":"role","type":"main","index":0}]]},"role":{"main":[[{"node":"Merge","type":"main","index":4}]]},"Read/Write Files from Disk3":{"main":[[{"node":"assistant","type":"main","index":0}]]},"assistant":{"main":[[{"node":"Merge","type":"main","index":5}]]},"Edit Fields":{"main":[[{"node":"Merge","type":"main","index":3}]]},"data":{"main":[[{"node":"ä¸»æŒäºº","type":"main","index":0}]]},"ä¸»æŒäºº":{"main":[[{"node":"join1","type":"main","index":0}]]},"switch":{"main":[[{"node":"Edit Fields1","type":"main","index":0}]]},"Switch":{"main":[[],[{"node":"Execute Workflow","type":"main","index":0}],[{"node":"Execute Workflow1","type":"main","index":0}],[{"node":"Execute Workflow2","type":"main","index":0}]]},"start":{"main":[[{"node":"Read/Write Files from Disk","type":"main","index":0},{"node":"Read/Write Files from Disk1","type":"main","index":0},{"node":"è·å–è…æ ¹ä¹‹é‡Œè®¾è®¡æ–‡æ¡£æ‰€æœ‰.mdæ ¼å¼æ–‡ä»¶","type":"main","index":0},{"node":"Read/Write Files from Disk2","type":"main","index":0},{"node":"Read/Write Files from Disk3","type":"main","index":0},{"node":"join","type":"main","index":0}]]},"join":{"main":[[{"node":"Merge","type":"main","index":0}]]},"join1":{"main":[[{"node":"switch","type":"main","index":0}]]},"Edit Fields1":{"main":[[{"node":"Switch","type":"main","index":0}]]},"åˆ¶ä½œäººï¼š":{"main":[[{"node":"start","type":"main","index":0}]]},"Execute Workflow":{"main":[[{"node":"äº¤å›ä¸»æŒäºº","type":"main","index":0}]]},"Execute Workflow1":{"main":[[{"node":"äº¤å›ä¸»æŒäºº","type":"main","index":0}]]},"Execute Workflow2":{"main":[[{"node":"äº¤å›ä¸»æŒäºº","type":"main","index":0}]]},"When Executed by Another Workflow":{"main":[[{"node":"start","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{"When Executed by Another Workflow":[{"json":{"sessionId":"bacc9731836047639a6bdea0aa61c60c","chatInput":"------"}}]},"versionId":"6f7759ee-4a5a-489b-98d4-fe1572cc8e96","triggerCount":1,"tags":[]},{"createdAt":"2025-07-12T11:59:26.687Z","updatedAt":"2025-07-12T12:25:28.000Z","id":"FqPDyYA7KXM5QkUt","name":"ä¿å­˜è®¨è®º","active":false,"isArchived":false,"nodes":[{"parameters":{"operation":"write","fileName":"=D:/Godot/RootsGodDoc/prompt/temp/{{ $('When Executed by Another Workflow').item.json.sessionId }}.md","options":{}},"type":"n8n-nodes-base.readWriteFile","typeVersion":1,"position":[580,60],"id":"d12bfc7d-5290-457e-a0fe-6e90b0bd71a8","name":"Read/Write Files from Disk"},{"parameters":{"inputSource":"jsonExample","jsonExample":"{\n\"sessionId\": \n\"89fc0c65b2a346f7846af3141d1ed04a\",\n\"chatInput\": \n\"test\"\n}"},"type":"n8n-nodes-base.executeWorkflowTrigger","typeVersion":1.1,"position":[60,60],"id":"26398fa1-7b05-4f48-845f-9a06446c913d","name":"When Executed by Another Workflow"},{"parameters":{"operation":"toText","sourceProperty":"chatInput","options":{}},"type":"n8n-nodes-base.convertToFile","typeVersion":1.1,"position":[320,60],"id":"c65f2950-bfc1-47b8-a4db-3aa7403181e1","name":"Convert to File"},{"parameters":{"assignments":{"assignments":[{"id":"fc5dec51-8a80-4793-b9f2-0f64b31bffcc","name":"sessionId","value":"={{ $('When Executed by Another Workflow').item.json.sessionId }}","type":"string"},{"id":"a2fbb5ae-a1e9-4282-9570-c47800f11ed5","name":"chatInput","value":"={{ $('When Executed by Another Workflow').item.json.chatInput }}","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[840,60],"id":"f35e85c1-7178-44c3-976b-0606c681329f","name":"Edit Fields"}],"connections":{"Read/Write Files from Disk":{"main":[[{"node":"Edit Fields","type":"main","index":0}]]},"When Executed by Another Workflow":{"main":[[{"node":"Convert to File","type":"main","index":0}]]},"Convert to File":{"main":[[{"node":"Read/Write Files from Disk","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":null,"pinData":{"When Executed by Another Workflow":[{"json":{"sessionId":"89fc0c65b2a346f7846af3141d1ed04a","chatInput":"test"}}]},"versionId":"f875f969-6a9c-42db-b3a7-13628c79bb96","triggerCount":0,"tags":[]},{"createdAt":"2025-07-12T12:02:04.680Z","updatedAt":"2025-07-12T12:21:22.000Z","id":"2q5k6ukFEoj6Tjw5","name":"è¯»å–è®¨è®º","active":false,"isArchived":false,"nodes":[{"parameters":{"inputSource":"jsonExample","jsonExample":"{\n\"sessionId\": \n\"89fc0c65b2a346f7846af3141d1ed04a\"\n}"},"type":"n8n-nodes-base.executeWorkflowTrigger","typeVersion":1.1,"position":[-220,-20],"id":"76102f96-bfbd-413e-ac8f-fa8ecdcc24d7","name":"When Executed by Another Workflow"},{"parameters":{"fileSelector":"=D:/Godot/RootsGodDoc/prompt/temp/{{ $('When Executed by Another Workflow').item.json.sessionId }}.md","options":{}},"type":"n8n-nodes-base.readWriteFile","typeVersion":1,"position":[60,-20],"id":"b7e648be-5b2b-4ea4-9724-8e0046ee5a44","name":"Read/Write Files from Disk","alwaysOutputData":true},{"parameters":{"operation":"text","options":{}},"type":"n8n-nodes-base.extractFromFile","typeVersion":1,"position":[320,-20],"id":"a9d5905f-be15-49b9-a74c-3aecf6846edb","name":"Extract from File","alwaysOutputData":true},{"parameters":{"assignments":{"assignments":[{"id":"089e9c74-dbbc-482d-a9dd-d5c6b94fdaab","name":"sessionId","value":"={{ $('When Executed by Another Workflow').item.json.sessionId }}","type":"string"},{"id":"5d8af9e3-0b8b-42db-9116-12462b1e399c","name":"chatInput","value":"={{ $json.data }}","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[560,-20],"id":"2ec96364-15be-4894-8fd1-059a2c68a01f","name":"Edit Fields"}],"connections":{"When Executed by Another Workflow":{"main":[[{"node":"Read/Write Files from Disk","type":"main","index":0}]]},"Read/Write Files from Disk":{"main":[[{"node":"Extract from File","type":"main","index":0}]]},"Extract from File":{"main":[[{"node":"Edit Fields","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":null,"pinData":{"When Executed by Another Workflow":[{"json":{"sessionId":"89fc0c65b2a346f7846af3141d1ed04a"}}]},"versionId":"7393d019-64dc-4588-a383-1cae6f014d5c","triggerCount":0,"tags":[]},{"createdAt":"2025-07-12T12:30:12.635Z","updatedAt":"2025-07-12T12:31:55.000Z","id":"SATzPo7dqpxjn3Jc","name":"è¿½åŠ è®¨è®º","active":false,"isArchived":false,"nodes":[{"parameters":{"workflowId":{"__rl":true,"value":"FqPDyYA7KXM5QkUt","mode":"list","cachedResultName":"ä¿å­˜è®¨è®º"},"workflowInputs":{"mappingMode":"defineBelow","value":{"sessionId":"={{ $('When Executed by Another Workflow').item.json.sessionId }}","chatInput":"={{ $json.chatInput }}"},"matchingColumns":[],"schema":[{"id":"sessionId","displayName":"sessionId","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"string"},{"id":"chatInput","displayName":"chatInput","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"string"}],"attemptToConvertTypes":false,"convertFieldsToString":true},"mode":"each","options":{"waitForSubWorkflow":true}},"type":"n8n-nodes-base.executeWorkflow","typeVersion":1.2,"position":[460,0],"id":"6acf1fbc-7b7c-48a0-a7da-bc62c62255a0","name":"save"},{"parameters":{"workflowId":{"__rl":true,"value":"2q5k6ukFEoj6Tjw5","mode":"list","cachedResultName":"è¯»å–è®¨è®º"},"workflowInputs":{"mappingMode":"defineBelow","value":{"sessionId":"={{ $json.sessionId }}"},"matchingColumns":["sessionId"],"schema":[{"id":"sessionId","displayName":"sessionId","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"string","removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":true},"mode":"each","options":{"waitForSubWorkflow":true}},"type":"n8n-nodes-base.executeWorkflow","typeVersion":1.2,"position":[0,0],"id":"962c5d31-5d03-425e-950e-f9f24419adc5","name":"load","alwaysOutputData":false},{"parameters":{"assignments":{"assignments":[{"id":"0c3917f6-6acd-49ca-81a3-7bcf79790041","name":"chatInput","value":"={{ $json.chatInput }}\n\n{{ $('When Executed by Another Workflow').item.json.chatInput }}","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[220,0],"id":"2c96e1ff-bac6-49b3-b673-69434694ec51","name":"join"},{"parameters":{"inputSource":"jsonExample","jsonExample":"{\n\"sessionId\": \n\"89fc0c65b2a346f7846af3141d1ed04a\",\n\"chatInput\": \n\"test\"\n}"},"type":"n8n-nodes-base.executeWorkflowTrigger","typeVersion":1.1,"position":[-260,0],"id":"700f6872-ff88-49ac-b1cf-82054a50c971","name":"When Executed by Another Workflow"}],"connections":{"load":{"main":[[{"node":"join","type":"main","index":0}]]},"join":{"main":[[{"node":"save","type":"main","index":0}]]},"When Executed by Another Workflow":{"main":[[{"node":"load","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":null,"pinData":{"When Executed by Another Workflow":[{"json":{"sessionId":"89fc0c65b2a346f7846af3141d1ed04a","chatInput":"test"}}]},"versionId":"3f9354c9-1a6b-4a71-9fa4-decf557906b9","triggerCount":0,"tags":[]}]